# ===================================
# MickeyShop-Beauty 後端設定說明檔案
# ===================================
# ⚠️ 重要: 本專案使用 Cloudflare Secrets 存儲所有敏感資料
# 請參考 ../SETUP_GUIDE.md 進行完整設定
# 此檔案僅用於說明，實際部署時不需要 .env 檔案

# === Cloudflare Secrets (敏感資料) ===
# 這些資料通過 "npx wrangler secret put" 指令設定
# JWT_SECRET - JWT 簽名密鑰（至少32位強密碼）
# ADMIN_DEFAULT_PASSWORD - 管理員預設密碼

# === 支付系統 Secrets ===
# ECPAY_MERCHANT_ID - 綠界特店編號
# ECPAY_HASH_KEY - 綠界 HashKey
# ECPAY_HASH_IV - 綠界 HashIV
# LINEPAY_CHANNEL_ID - LINE Pay 頻道 ID
# LINEPAY_CHANNEL_SECRET - LINE Pay 頻道密鑰

# === 電子郵件 Secrets ===
# SMTP_HOST - SMTP 伺服器地址
# SMTP_PORT - SMTP 埠號
# SMTP_USER - SMTP 用戶名
# SMTP_PASSWORD - SMTP 密碼

# === 第三方服務 Secrets ===
# GOOGLE_ANALYTICS_ID - Google Analytics ID
# FACEBOOK_PIXEL_ID - Facebook Pixel ID
# GOOGLE_MAPS_API_KEY - Google Maps API 金鑰
# SENTRY_DSN - Sentry 錯誤監控 DSN

# === 公開環境變數 (wrangler.toml) ===
APP_NAME=MickeyShop Beauty
APP_VERSION=1.0.0
APP_DESCRIPTION=專業美妝電商平台

# === 跨域設定 ===
# 允許的前端域名，多個用逗號分隔
CORS_ORIGIN=http://localhost:5173,https://yourstore.com,https://www.yourstore.com

# === 速率限制設定 ===
# 登入嘗試次數 (每 15 分鐘)
RATE_LIMIT_LOGIN=10
# 註冊次數 (每 15 分鐘)
RATE_LIMIT_REGISTER=5
# 密碼重設次數 (每 15 分鐘)
RATE_LIMIT_RESET_PASSWORD=3
# Token 刷新次數 (每 15 分鐘)
RATE_LIMIT_REFRESH=20

# === 檔案上傳設定 ===
# 檔案大小限制 (bytes, 預設 5MB)
MAX_FILE_SIZE=5242880
# 允許的檔案類型
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/webp,image/gif
# R2 儲存桶名稱
R2_BUCKET_NAME=mickeyshop-beauty-storage
# CDN 域名 (選用)
CDN_DOMAIN=https://cdn.yourstore.com

# === 電子郵件設定 (SMTP) ===
# SMTP 伺服器設定 - Gmail 範例
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-gmail-app-password
SMTP_FROM_NAME=MickeyShop Beauty
SMTP_FROM_EMAIL=noreply@yourstore.com

# SendGrid 範例 (替代 Gmail)
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USER=apikey
# SMTP_PASSWORD=your-sendgrid-api-key

# Mailgun 範例 (替代 Gmail)
# SMTP_HOST=smtp.mailgun.org
# SMTP_PORT=587
# SMTP_USER=your-mailgun-username
# SMTP_PASSWORD=your-mailgun-password

# === 支付系統設定 ===
# 綠界科技 ECPay (主要支付系統)
ECPAY_MERCHANT_ID=2000132
ECPAY_HASH_KEY=5294y06JbISpM5x9
ECPAY_HASH_IV=v77hoKGq4kWxNNIS
ECPAY_SANDBOX=true

# LINE Pay (行動支付)
LINEPAY_CHANNEL_ID=1234567890
LINEPAY_CHANNEL_SECRET=abc123def456
LINEPAY_SANDBOX=true

# === 第三方服務 API 金鑰 ===
# Google 服務
GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
GOOGLE_MAPS_API_KEY=AIza...
GOOGLE_OAUTH_CLIENT_ID=1234...
GOOGLE_OAUTH_CLIENT_SECRET=GOC...

# Facebook 服務
FACEBOOK_APP_ID=1234567890123456
FACEBOOK_APP_SECRET=abc123...
FACEBOOK_PIXEL_ID=1234567890123456

# LINE 服務 (台灣常用)
LINE_CHANNEL_ID=1234567890
LINE_CHANNEL_SECRET=abc123...
LINE_CHANNEL_ACCESS_TOKEN=xyz789...

# === 物流服務設定 ===
# 黑貓宅急便
TCAT_MERCHANT_ID=your-tcat-id
TCAT_API_KEY=your-tcat-key

# 7-ELEVEN 超商取貨
SEVEN_MERCHANT_ID=your-seven-id
SEVEN_API_KEY=your-seven-key

# === 簡訊服務設定 ===
# Twilio
TWILIO_ACCOUNT_SID=AC...
TWILIO_AUTH_TOKEN=your-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# 台灣大哥大簡訊服務
TW_SMS_USERNAME=your-tw-sms-username
TW_SMS_PASSWORD=your-tw-sms-password

# === 雲端儲存設定 ===
# AWS S3 (備用儲存)
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=abc123...
AWS_REGION=ap-northeast-1
AWS_S3_BUCKET=your-s3-bucket

# === 快取設定 ===
# Redis (選用，用於高流量場景)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your-redis-password

# === 監控與日誌設定 ===
# Sentry 錯誤監控
SENTRY_DSN=https://abc123@o123456.ingest.sentry.io/1234567

# 日誌等級 (debug, info, warn, error)
LOG_LEVEL=info

# === 系統設定 ===
# 系統時區
TIMEZONE=Asia/Taipei

# 預設語言
DEFAULT_LANGUAGE=zh-TW

# 貨幣設定
DEFAULT_CURRENCY=TWD
CURRENCY_SYMBOL=NT$

# === 業務設定 ===
# 會員積點比例 (每消費 1 元獲得多少點)
LOYALTY_POINT_RATE=1

# 免運費門檻 (TWD)
FREE_SHIPPING_THRESHOLD=1000

# 訂單自動取消時間 (分鐘)
ORDER_AUTO_CANCEL_MINUTES=30

# === 安全設定 ===
# 密碼強度要求
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL_CHARS=true

# Token 有效期設定 (秒)
ACCESS_TOKEN_EXPIRES_IN=900
REFRESH_TOKEN_EXPIRES_IN=604800

# 會話逾時設定 (秒)
SESSION_TIMEOUT=3600

# IP 白名單 (管理員登入，可選)
ADMIN_IP_WHITELIST=192.168.1.1,10.0.0.1

# === 開發/測試設定 ===
# 開發模式
NODE_ENV=development
DEBUG_MODE=true

# 測試資料庫 (選用)
TEST_DATABASE_URL=sqlite:./test.db

# === 備份設定 ===
# 自動備份開關
AUTO_BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# ===================================
# 設定完成後，請執行以下步驟：
# 1. 檢查所有必要變數是否已填寫
# 2. 確認 JWT_SECRET 使用強密碼
# 3. 更改所有預設密碼
# 4. 設定適當的 CORS_ORIGIN
# 5. 配置所需的第三方服務
# ===================================