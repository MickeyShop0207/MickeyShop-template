# 會員系統設計

## 系統概覽

完整的會員中心系統，包含會員等級管理、訂單管理、收藏清單、個人資料管理等功能，提供用戶完整的購物體驗和帳戶管理功能。

## 會員中心架構設計

### 1. 整體布局結構
```jsx
// pages/Member/index.jsx
const MemberPage = () => {
  const { user, isAuthenticated } = useAuthStore()
  const { locale } = useI18nStore()
  
  if (!isAuthenticated) {
    return <Navigate to={`/${locale}/login`} replace />
  }
  
  return (
    <div className={styles.memberPage}>
      <div className={styles.memberContainer}>
        {/* 會員側邊欄 */}
        <aside className={styles.memberSidebar}>
          <MemberSidebar />
        </aside>
        
        {/* 會員內容區域 */}
        <main className={styles.memberContent}>
          <Routes>
            <Route path="/" element={<MemberDashboard />} />
            <Route path="/profile" element={<MemberProfile />} />
            <Route path="/orders" element={<MemberOrders />} />
            <Route path="/orders/:orderId" element={<OrderDetail />} />
            <Route path="/wishlist" element={<MemberWishlist />} />
            <Route path="/addresses" element={<MemberAddresses />} />
            <Route path="/coupons" element={<MemberCoupons />} />
            <Route path="/notifications" element={<MemberNotifications />} />
            <Route path="/settings" element={<MemberSettings />} />
          </Routes>
        </main>
      </div>
    </div>
  )
}
```

### 2. 會員側邊欄導航
```jsx
// components/MemberSidebar/index.jsx
const MemberSidebar = () => {
  const { user } = useAuthStore()
  const location = useLocation()
  
  const menuItems = [
    {
      key: 'dashboard',
      icon: <DashboardOutlined />,
      label: '會員總覽',
      path: '/member'
    },
    {
      key: 'profile',
      icon: <UserOutlined />,
      label: '個人資料',
      path: '/member/profile'
    },
    {
      key: 'orders',
      icon: <ShoppingOutlined />,
      label: '訂單管理',
      path: '/member/orders'
    },
    {
      key: 'wishlist',
      icon: <HeartOutlined />,
      label: '收藏清單',
      path: '/member/wishlist'
    },
    {
      key: 'addresses',
      icon: <EnvironmentOutlined />,
      label: '收件地址',
      path: '/member/addresses'
    },
    {
      key: 'coupons',
      icon: <GiftOutlined />,
      label: '優惠券',
      path: '/member/coupons'
    },
    {
      key: 'notifications',
      icon: <BellOutlined />,
      label: '通知設定',
      path: '/member/notifications'
    },
    {
      key: 'settings',
      icon: <SettingOutlined />,
      label: '帳戶設定',
      path: '/member/settings'
    }
  ]
  
  return (
    <div className={styles.memberSidebar}>
      {/* 會員信息卡片 */}
      <div className={styles.memberCard}>
        {/* 頭像 */}
        <div className={styles.avatarSection}>
          <Avatar 
            size={80} 
            src={user.avatar} 
            className={styles.memberAvatar}
          >
            {user.name?.[0]}
          </Avatar>
        </div>
        
        {/* 會員基本資訊 */}
        <div className={styles.memberInfo}>
          <h3 className={styles.memberName}>{user.name}</h3>
          <div className={styles.memberMeta}>
            <Tag color="gold" className={styles.memberTier}>
              {user.memberTier?.toUpperCase()} 會員
            </Tag>
            <span className={styles.joinDate}>
              加入時間：{formatDate(user.createdAt)}
            </span>
          </div>
        </div>
      </div>
      
      {/* 會員等級進度 */}
      <MemberLevelProgress user={user} />
      
      {/* 導航選單 */}
      <Menu
        mode="inline"
        selectedKeys={[getCurrentMenuKey(location.pathname)]}
        className={styles.memberMenu}
        items={menuItems.map(item => ({
          key: item.key,
          icon: item.icon,
          label: (
            <Link to={item.path} className={styles.menuLink}>
              {item.label}
            </Link>
          )
        }))}
      />
    </div>
  )
}
```

## 會員等級系統

### 1. 會員等級進度組件
```jsx
// components/MemberLevelProgress/index.jsx
const MemberLevelProgress = ({ user }) => {
  const [memberLevels, setMemberLevels] = useState([])
  const [nextLevelInfo, setNextLevelInfo] = useState(null)
  
  useEffect(() => {
    fetchMemberLevelInfo()
  }, [user.memberTier])
  
  const fetchMemberLevelInfo = async () => {
    try {
      const response = await api.getMemberLevelInfo()
      setMemberLevels(response.levels)
      setNextLevelInfo(response.nextLevel)
    } catch (error) {
      console.error('載入會員等級資訊失敗:', error)
    }
  }
  
  const currentLevel = memberLevels.find(level => level.tier === user.memberTier)
  const progressPercent = nextLevelInfo ? 
    (user.totalSpent / nextLevelInfo.requiredSpent) * 100 : 100
  
  return (
    <div className={styles.memberLevelProgress}>
      <div className={styles.levelHeader}>
        <span className={styles.levelTitle}>會員等級</span>
        <Tag color="gold" className={styles.currentLevel}>
          {currentLevel?.name || 'Bronze'}
        </Tag>
      </div>
      
      {/* 會員等級進度條 */}
      {nextLevelInfo && (
        <div className={styles.progressSection}>
          <div className={styles.progressInfo}>
            <span>升級進度</span>
            <span>{Math.min(progressPercent, 100).toFixed(1)}%</span>
          </div>
          <Progress
            percent={Math.min(progressPercent, 100)}
            strokeColor={{
              '0%': '#faad14',
              '100%': '#ffd700'
            }}
            showInfo={false}
            className={styles.levelProgress}
          />
          <div className={styles.upgradeRequirement}>
            再消費 ${formatPrice(Math.max(0, nextLevelInfo.requiredSpent - user.totalSpent))} 
            即可升級至 {nextLevelInfo.name}
          </div>
        </div>
      )}
      
      {/* 顯示會員權益說明 */}
      <Button 
        type="link" 
        size="small"
        onClick={() => setShowBenefitsModal(true)}
        className={styles.benefitsBtn}
      >
        查看會員權益
      </Button>
      
      {/* 會員權益彈窗 */}
      <Modal
        title="會員權益說明"
        open={showBenefitsModal}
        onCancel={() => setShowBenefitsModal(false)}
        footer={null}
        width={600}
      >
        <MemberBenefitsModal levels={memberLevels} />
      </Modal>
      
      {/* 升級條件彈窗 */}
      <Modal
        title="升級條件"
        open={showUpgradeModal}
        onCancel={() => setShowUpgradeModal(false)}
        footer={null}
        width={500}
      >
        <MemberUpgradeModal 
          currentLevel={currentLevel}
          nextLevel={nextLevelInfo}
          user={user}
        />
      </Modal>
    </div>
  )
}
```

### 2. 會員權益說明組件
```jsx
// components/MemberBenefitsModal/index.jsx
const MemberBenefitsModal = ({ levels }) => {
  return (
    <div className={styles.memberBenefits}>
      {levels.map(level => (
        <div key={level.tier} className={styles.levelCard}>
          <div className={styles.levelHeader}>
            <Tag color={level.color} className={styles.levelTag}>
              {level.name}
            </Tag>
            <span className={styles.levelRequirement}>
              消費滿 ${formatPrice(level.requiredSpent)}
            </span>
          </div>
          
          <div className={styles.benefitsList}>
            <h4>專屬權益：</h4>
            <ul>
              <li>
                <PercentageOutlined className={styles.benefitIcon} />
                享有 {(level.discountRate * 100).toFixed(0)}% 會員折扣
              </li>
              <li>
                <GiftOutlined className={styles.benefitIcon} />
                生日當月專屬優惠券
              </li>
              <li>
                <TruckOutlined className={styles.benefitIcon} />
                {level.tier === 'gold' ? '免費宅配' : 
                 level.tier === 'silver' ? '滿$1000免運' : 
                 '滿$1500免運'}
              </li>
              <li>
                <StarOutlined className={styles.benefitIcon} />
                {level.tier === 'gold' ? '優先客服' : '專屬客服'}
              </li>
            </ul>
          </div>
        </div>
      ))}
    </div>
  )
}
```

## 會員總覽頁面

### 1. 會員儀表板
```jsx
// pages/Member/Dashboard/index.jsx
const MemberDashboard = () => {
  const { user } = useAuthStore()
  const [dashboardData, setDashboardData] = useState({})
  const [loading, setLoading] = useState(true)
  
  useEffect(() => {
    fetchDashboardData()
  }, [])
  
  const fetchDashboardData = async () => {
    try {
      const response = await api.getMemberDashboard()
      setDashboardData(response.data)
    } catch (error) {
      console.error('載入會員總覽失敗:', error)
    } finally {
      setLoading(false)
    }
  }
  
  if (loading) return <DashboardSkeleton />
  
  return (
    <div className={styles.memberDashboard}>
      <div className={styles.dashboardHeader}>
        <h2>會員總覽</h2>
        <p>歡迎回來，{user.name}！</p>
      </div>
      
      {/* 快速統計 */}
      <div className={styles.quickStats}>
        <div className={styles.statCard}>
          <div className={styles.statIcon}>
            <ShoppingOutlined />
          </div>
          <div className={styles.statContent}>
            <div className={styles.statNumber}>
              {dashboardData.totalOrders || 0}
            </div>
            <div className={styles.statLabel}>總訂單數</div>
          </div>
        </div>
        
        <div className={styles.statCard}>
          <div className={styles.statIcon}>
            <DollarOutlined />
          </div>
          <div className={styles.statContent}>
            <div className={styles.statNumber}>
              ${formatPrice(dashboardData.totalSpent || 0)}
            </div>
            <div className={styles.statLabel}>累積消費</div>
          </div>
        </div>
        
        <div className={styles.statCard}>
          <div className={styles.statIcon}>
            <HeartOutlined />
          </div>
          <div className={styles.statContent}>
            <div className={styles.statNumber}>
              {dashboardData.wishlistCount || 0}
            </div>
            <div className={styles.statLabel}>收藏商品</div>
          </div>
        </div>
        
        <div className={styles.statCard}>
          <div className={styles.statIcon}>
            <GiftOutlined />
          </div>
          <div className={styles.statContent}>
            <div className={styles.statNumber}>
              {dashboardData.availableCoupons || 0}
            </div>
            <div className={styles.statLabel}>可用優惠券</div>
          </div>
        </div>
      </div>
      
      {/* 近期訂單 */}
      <div className={styles.recentOrders}>
        <div className={styles.sectionHeader}>
          <h3>近期訂單</h3>
          <Link to="/member/orders" className={styles.viewAllLink}>
            查看全部
          </Link>
        </div>
        <RecentOrdersList orders={dashboardData.recentOrders} />
      </div>
      
      {/* 推薦商品 */}
      <div className={styles.recommendedProducts}>
        <div className={styles.sectionHeader}>
          <h3>為您推薦</h3>
        </div>
        <RecommendedProductsGrid products={dashboardData.recommendedProducts} />
      </div>
    </div>
  )
}
```

## 訂單管理系統

### 1. 訂單列表頁面
```jsx
// pages/Member/Orders/index.jsx
const MemberOrders = () => {
  const [orders, setOrders] = useState([])
  const [loading, setLoading] = useState(true)
  const [activeTab, setActiveTab] = useState('all')
  const [searchParams, setSearchParams] = useState({
    keyword: '',
    status: '',
    dateRange: null,
    page: 1,
    pageSize: 10
  })
  
  const orderTabs = [
    { key: 'all', label: '全部訂單' },
    { key: 'pending_payment', label: '待付款' },
    { key: 'paid', label: '已付款' },
    { key: 'shipping', label: '配送中' },
    { key: 'delivered', label: '已送達' },
    { key: 'completed', label: '已完成' },
    { key: 'cancelled', label: '已取消' }
  ]
  
  useEffect(() => {
    fetchOrders()
  }, [searchParams, activeTab])
  
  const fetchOrders = async () => {
    try {
      setLoading(true)
      const response = await api.getMemberOrders({
        ...searchParams,
        status: activeTab === 'all' ? '' : activeTab
      })
      setOrders(response.data)
    } catch (error) {
      notification.error({
        message: '載入訂單失敗',
        description: error.message
      })
    } finally {
      setLoading(false)
    }
  }
  
  // 訂單搜尋功能
  const handleSearch = (values) => {
    setSearchParams(prev => ({
      ...prev,
      ...values,
      page: 1
    }))
  }
  
  // 匯出訂單功能
  const handleExportOrders = async () => {
    try {
      const response = await api.exportMemberOrders({
        ...searchParams,
        status: activeTab === 'all' ? '' : activeTab
      })
      
      // 下載 Excel 檔案
      const blob = new Blob([response.data], {
        type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
      })
      const url = window.URL.createObjectURL(blob)
      const link = document.createElement('a')
      link.href = url
      link.download = `訂單明細_${formatDate(new Date(), 'YYYYMMDD')}.xlsx`
      link.click()
      window.URL.revokeObjectURL(url)
      
      notification.success({
        message: '匯出成功',
        description: '訂單資料已匯出至 Excel 檔案'
      })
    } catch (error) {
      notification.error({
        message: '匯出失敗',
        description: error.message
      })
    }
  }
  
  return (
    <div className={styles.memberOrders}>
      <div className={styles.ordersHeader}>
        <h2>訂單管理</h2>
        <Button 
          icon={<DownloadOutlined />}
          onClick={handleExportOrders}
          className={styles.exportBtn}
        >
          匯出訂單
        </Button>
      </div>
      
      {/* 訂單搜尋 */}
      <div className={styles.orderSearch}>
        <Form 
          layout="inline"
          onFinish={handleSearch}
          className={styles.searchForm}
        >
          <Form.Item name="keyword">
            <Input
              placeholder="搜尋訂單編號或商品名稱"
              prefix={<SearchOutlined />}
              style={{ width: 250 }}
            />
          </Form.Item>
          
          <Form.Item name="dateRange">
            <RangePicker placeholder={['開始日期', '結束日期']} />
          </Form.Item>
          
          <Form.Item>
            <Button type="primary" htmlType="submit">
              搜尋
            </Button>
          </Form.Item>
          
          <Form.Item>
            <Button onClick={() => {
              setSearchParams(prev => ({ ...prev, keyword: '', dateRange: null, page: 1 }))
            }}>
              重置
            </Button>
          </Form.Item>
        </Form>
      </div>
      
      {/* 依訂單狀態分類顯示 */}
      <Tabs
        activeKey={activeTab}
        onChange={setActiveTab}
        className={styles.orderTabs}
        items={orderTabs.map(tab => ({
          key: tab.key,
          label: tab.label,
          children: (
            <OrdersList
              orders={orders}
              loading={loading}
              onRefresh={fetchOrders}
            />
          )
        }))}
      />
      
      {/* 分頁 - 每頁顯示10筆訂單 */}
      <Pagination
        current={searchParams.page}
        pageSize={searchParams.pageSize}
        total={orders.totalCount}
        showSizeChanger={false}
        showQuickJumper
        onChange={(page) => setSearchParams(prev => ({ ...prev, page }))}
        className={styles.ordersPagination}
      />
    </div>
  )
}
```

### 2. 訂單項目組件
```jsx
// components/OrdersList/OrderItem.jsx
const OrderItem = ({ order, onRefresh }) => {
  const [trackingModalVisible, setTrackingModalVisible] = useState(false)
  
  // 重新購買
  const handleReorder = async () => {
    try {
      // 將訂單商品加入購物車
      for (const item of order.items) {
        await api.addToCart({
          productId: item.productId,
          quantity: item.quantity,
          variants: item.variants
        })
      }
      
      notification.success({
        message: '已加入購物車',
        description: '訂單商品已重新加入購物車'
      })
    } catch (error) {
      notification.error({
        message: '加入購物車失敗',
        description: error.message
      })
    }
  }
  
  // 申請退換貨
  const handleRefund = () => {
    // 跳轉到退換貨申請頁面
    window.location.href = `/member/orders/${order.id}/refund`
  }
  
  return (
    <div className={styles.orderItem}>
      {/* 訂單標題 */}
      <div className={styles.orderHeader}>
        <div className={styles.orderInfo}>
          <span className={styles.orderNumber}>
            訂單編號：{order.orderNumber}
          </span>
          <span className={styles.orderDate}>
            {formatDate(order.createdAt)}
          </span>
        </div>
        <div className={styles.orderStatus}>
          <Tag color={getStatusColor(order.status)}>
            {getStatusText(order.status)}
          </Tag>
        </div>
      </div>
      
      {/* 訂單商品 */}
      <div className={styles.orderItems}>
        {order.items.map(item => (
          <div key={item.id} className={styles.orderProductItem}>
            <img 
              src={item.product.image} 
              alt={item.product.name}
              className={styles.productImage}
            />
            <div className={styles.productInfo}>
              <h4 className={styles.productName}>
                <Link to={`/product/${item.product.id}`}>
                  {item.product.name}
                </Link>
              </h4>
              {item.variants && (
                <div className={styles.productVariants}>
                  {Object.entries(item.variants).map(([key, value]) => (
                    <span key={key} className={styles.variant}>
                      {key}: {value}
                    </span>
                  ))}
                </div>
              )}
              <div className={styles.productQuantity}>
                數量：{item.quantity}
              </div>
            </div>
            <div className={styles.productPrice}>
              ${formatPrice(item.price * item.quantity)}
            </div>
          </div>
        ))}
      </div>
      
      {/* 訂單總計 */}
      <div className={styles.orderSummary}>
        <div className={styles.summaryItem}>
          <span>商品小計：</span>
          <span>${formatPrice(order.subtotal)}</span>
        </div>
        <div className={styles.summaryItem}>
          <span>運費：</span>
          <span>${formatPrice(order.shippingFee)}</span>
        </div>
        <div className={styles.summaryTotal}>
          <span>訂單總計：</span>
          <span className={styles.totalAmount}>
            ${formatPrice(order.totalAmount)}
          </span>
        </div>
      </div>
      
      {/* 訂單操作按鈕 */}
      <div className={styles.orderActions}>
        <Space>
          {/* 查看詳情 */}
          <Link to={`/member/orders/${order.id}`}>
            <Button>查看詳情</Button>
          </Link>
          
          {/* 物流追蹤功能 */}
          {['shipped', 'delivered'].includes(order.status) && (
            <Button 
              onClick={() => setTrackingModalVisible(true)}
              icon={<TruckOutlined />}
            >
              物流追蹤
            </Button>
          )}
          
          {/* 重新購買按鈕 */}
          <Button 
            onClick={handleReorder}
            icon={<ShoppingCartOutlined />}
          >
            重新購買
          </Button>
          
          {/* 申請退換貨按鈕 */}
          {['delivered', 'completed'].includes(order.status) && (
            <Button 
              onClick={handleRefund}
              icon={<SwapOutlined />}
            >
              申請退換貨
            </Button>
          )}
        </Space>
      </div>
      
      {/* 物流追蹤彈窗 */}
      <Modal
        title="物流追蹤"
        open={trackingModalVisible}
        onCancel={() => setTrackingModalVisible(false)}
        footer={null}
        width={600}
      >
        <ShippingTrackingModal orderId={order.id} />
      </Modal>
    </div>
  )
}
```

### 3. 物流追蹤組件
```jsx
// components/ShippingTrackingModal/index.jsx
const ShippingTrackingModal = ({ orderId }) => {
  const [trackingInfo, setTrackingInfo] = useState(null)
  const [loading, setLoading] = useState(true)
  
  useEffect(() => {
    fetchTrackingInfo()
  }, [orderId])
  
  const fetchTrackingInfo = async () => {
    try {
      const response = await api.getShippingTracking(orderId)
      setTrackingInfo(response.data)
    } catch (error) {
      notification.error({
        message: '載入物流資訊失敗',
        description: error.message
      })
    } finally {
      setLoading(false)
    }
  }
  
  if (loading) return <Spin size="large" />
  
  return (
    <div className={styles.shippingTracking}>
      {trackingInfo && (
        <>
          <div className={styles.trackingHeader}>
            <h4>物流單號：{trackingInfo.trackingNumber}</h4>
            <Tag color="blue">{trackingInfo.carrier}</Tag>
          </div>
          
          <Timeline className={styles.trackingTimeline}>
            {trackingInfo.events.map((event, index) => (
              <Timeline.Item
                key={index}
                dot={
                  index === 0 ? (
                    <CheckCircleOutlined style={{ color: '#52c41a' }} />
                  ) : (
                    <ClockCircleOutlined style={{ color: '#1890ff' }} />
                  )
                }
              >
                <div className={styles.timelineEvent}>
                  <div className={styles.eventTime}>
                    {formatDateTime(event.timestamp)}
                  </div>
                  <div className={styles.eventDescription}>
                    {event.description}
                  </div>
                  {event.location && (
                    <div className={styles.eventLocation}>
                      地點：{event.location}
                    </div>
                  )}
                </div>
              </Timeline.Item>
            ))}
          </Timeline>
        </>
      )}
    </div>
  )
}
```

## 收藏清單系統

### 1. 收藏清單頁面
```jsx
// pages/Member/Wishlist/index.jsx
const MemberWishlist = () => {
  const [wishlistItems, setWishlistItems] = useState([])
  const [loading, setLoading] = useState(true)
  const [selectedItems, setSelectedItems] = useState([])
  
  useEffect(() => {
    fetchWishlist()
  }, [])
  
  const fetchWishlist = async () => {
    try {
      const response = await api.getWishlist()
      setWishlistItems(response.data)
    } catch (error) {
      notification.error({
        message: '載入收藏清單失敗',
        description: error.message
      })
    } finally {
      setLoading(false)
    }
  }
  
  // 批量加入購物車
  const handleBatchAddToCart = async () => {
    if (selectedItems.length === 0) {
      notification.warning({
        message: '請選擇商品',
        description: '請先勾選要加入購物車的商品'
      })
      return
    }
    
    try {
      for (const itemId of selectedItems) {
        const item = wishlistItems.find(item => item.id === itemId)
        await api.addToCart({
          productId: item.product.id,
          quantity: 1
        })
      }
      
      notification.success({
        message: '批量加入成功',
        description: `已將 ${selectedItems.length} 件商品加入購物車`
      })
      
      setSelectedItems([])
    } catch (error) {
      notification.error({
        message: '批量加入失敗',
        description: error.message
      })
    }
  }
  
  // 批量移除收藏
  const handleBatchRemove = async () => {
    if (selectedItems.length === 0) return
    
    try {
      await api.removeFromWishlistBatch(selectedItems)
      await fetchWishlist()
      setSelectedItems([])
      
      notification.success({
        message: '批量移除成功',
        description: `已移除 ${selectedItems.length} 件收藏商品`
      })
    } catch (error) {
      notification.error({
        message: '批量移除失敗',
        description: error.message
      })
    }
  }
  
  if (loading) return <WishlistSkeleton />
  
  return (
    <div className={styles.memberWishlist}>
      <div className={styles.wishlistHeader}>
        <h2>收藏清單</h2>
        <div className={styles.wishlistStats}>
          共 {wishlistItems.length} 件商品
        </div>
      </div>
      
      {wishlistItems.length > 0 ? (
        <>
          {/* 批量操作工具欄 */}
          <div className={styles.batchActions}>
            <Checkbox
              indeterminate={selectedItems.length > 0 && selectedItems.length < wishlistItems.length}
              checked={selectedItems.length === wishlistItems.length}
              onChange={(e) => {
                if (e.target.checked) {
                  setSelectedItems(wishlistItems.map(item => item.id))
                } else {
                  setSelectedItems([])
                }
              }}
            >
              全選
            </Checkbox>
            
            <Space>
              <Button 
                type="primary"
                disabled={selectedItems.length === 0}
                onClick={handleBatchAddToCart}
                icon={<ShoppingCartOutlined />}
              >
                加入購物車 ({selectedItems.length})
              </Button>
              
              <Button 
                danger
                disabled={selectedItems.length === 0}
                onClick={handleBatchRemove}
                icon={<DeleteOutlined />}
              >
                移除收藏 ({selectedItems.length})
              </Button>
            </Space>
          </div>
          
          {/* 收藏商品網格卡片展示 */}
          <div className={styles.wishlistGrid}>
            {wishlistItems.map(item => (
              <WishlistCard
                key={item.id}
                item={item}
                selected={selectedItems.includes(item.id)}
                onSelect={(selected) => {
                  if (selected) {
                    setSelectedItems(prev => [...prev, item.id])
                  } else {
                    setSelectedItems(prev => prev.filter(id => id !== item.id))
                  }
                }}
                onRemove={() => {
                  fetchWishlist()
                }}
                onAddToCart={() => {
                  // 加入購物車邏輯
                }}
              />
            ))}
          </div>
        </>
      ) : (
        <Empty
          image={Empty.PRESENTED_IMAGE_SIMPLE}
          description="您的收藏清單是空的"
        >
          <Button type="primary">
            <Link to="/">去逛逛</Link>
          </Button>
        </Empty>
      )}
    </div>
  )
}
```

### 2. 收藏商品卡片
```jsx
// components/WishlistCard/index.jsx
const WishlistCard = ({ item, selected, onSelect, onRemove, onAddToCart }) => {
  const [loading, setLoading] = useState(false)
  
  const handleRemove = async () => {
    setLoading(true)
    try {
      await api.removeFromWishlist(item.product.id)
      onRemove()
      
      notification.success({
        message: '已移除收藏',
        duration: 2
      })
    } catch (error) {
      notification.error({
        message: '移除失敗',
        description: error.message
      })
    } finally {
      setLoading(false)
    }
  }
  
  const handleAddToCart = async () => {
    setLoading(true)
    try {
      await api.addToCart({
        productId: item.product.id,
        quantity: 1
      })
      onAddToCart()
      
      notification.success({
        message: '已加入購物車',
        duration: 2
      })
    } catch (error) {
      notification.error({
        message: '加入購物車失敗',
        description: error.message
      })
    } finally {
      setLoading(false)
    }
  }
  
  return (
    <Card
      className={`${styles.wishlistCard} ${selected ? styles.selected : ''}`}
      loading={loading}
      cover={
        <div className={styles.cardCover}>
          <Checkbox
            checked={selected}
            onChange={(e) => onSelect(e.target.checked)}
            className={styles.selectCheckbox}
          />
          
          <Link to={`/product/${item.product.id}`}>
            <img 
              src={item.product.image} 
              alt={item.product.name}
              className={styles.productImage}
            />
          </Link>
          
          {/* 快速操作按鈕 */}
          <div className={styles.quickActions}>
            <Button
              type="primary"
              icon={<ShoppingCartOutlined />}
              onClick={handleAddToCart}
              className={styles.addToCartBtn}
            >
              加入購物車
            </Button>
          </div>
        </div>
      }
      actions={[
        <Button 
          type="link" 
          icon={<EyeOutlined />}
          onClick={() => window.open(`/product/${item.product.id}`, '_blank')}
        >
          查看
        </Button>,
        <Button 
          type="link" 
          danger
          icon={<HeartFilled />}
          onClick={handleRemove}
        >
          移除
        </Button>
      ]}
    >
      <Card.Meta
        title={
          <Link 
            to={`/product/${item.product.id}`}
            className={styles.productTitle}
          >
            {item.product.name}
          </Link>
        }
        description={
          <div className={styles.productMeta}>
            <div className={styles.productPrice}>
              <span className={styles.currentPrice}>
                ${formatPrice(item.product.currentPrice)}
              </span>
              {item.product.originalPrice > item.product.currentPrice && (
                <span className={styles.originalPrice}>
                  ${formatPrice(item.product.originalPrice)}
                </span>
              )}
            </div>
            
            <div className={styles.productRating}>
              <Rate disabled defaultValue={item.product.rating} size="small" />
              <span className={styles.ratingCount}>
                ({item.product.reviewCount})
              </span>
            </div>
            
            <div className={styles.addedDate}>
              收藏於 {formatDate(item.createdAt)}
            </div>
          </div>
        }
      />
    </Card>
  )
}
```

## 個人資料管理

### 1. 個人資料頁面
```jsx
// pages/Member/Profile/index.jsx
const MemberProfile = () => {
  const { user, updateProfile } = useAuthStore()
  const [editing, setEditing] = useState(false)
  const [formData, setFormData] = useState(user)
  const [avatarUploading, setAvatarUploading] = useState(false)
  
  // 頭像上傳功能
  const handleAvatarUpload = async (file) => {
    const formData = new FormData()
    formData.append('avatar', file)
    
    setAvatarUploading(true)
    try {
      const response = await api.uploadAvatar(formData)
      const avatarUrl = response.data.url
      
      await updateProfile({ avatar: avatarUrl })
      setFormData(prev => ({ ...prev, avatar: avatarUrl }))
      
      notification.success({
        message: '頭像更新成功',
        duration: 2
      })
    } catch (error) {
      notification.error({
        message: '頭像上傳失敗',
        description: error.message
      })
    } finally {
      setAvatarUploading(false)
    }
  }
  
  return (
    <div className={styles.memberProfile}>
      <div className={styles.profileHeader}>
        <h2>個人資料</h2>
        <Button 
          type={editing ? 'default' : 'primary'}
          onClick={() => setEditing(!editing)}
        >
          {editing ? '取消編輯' : '編輯資料'}
        </Button>
      </div>
      
      <div className={styles.profileContent}>
        {/* 頭像上傳區域 */}
        <div className={styles.avatarSection}>
          <Upload
            showUploadList={false}
            beforeUpload={handleAvatarUpload}
            accept="image/*"
          >
            <div className={styles.avatarUpload}>
              <Avatar 
                size={120} 
                src={formData.avatar}
                className={styles.avatar}
              >
                {user.name?.[0]}
              </Avatar>
              {editing && (
                <div className={styles.avatarOverlay}>
                  <CameraOutlined />
                  <span>更換頭像</span>
                </div>
              )}
            </div>
          </Upload>
        </div>
        
        {/* 個人資料表單 */}
        <ProfileEditForm
          user={formData}
          editing={editing}
          onSave={(updatedData) => {
            updateProfile(updatedData)
            setFormData(updatedData)
            setEditing(false)
          }}
        />
      </div>
    </div>
  )
}
```

### 2. 帳戶設定頁面
```jsx
// pages/Member/Settings/index.jsx
const MemberSettings = () => {
  const { user, logout } = useAuthStore()
  const [deleteModalVisible, setDeleteModalVisible] = useState(false)
  
  // 帳戶刪除確認流程
  const handleDeleteAccount = async () => {
    Modal.confirm({
      title: '確認刪除帳戶',
      content: (
        <div>
          <p>⚠️ 警告：此操作無法復原</p>
          <p>刪除帳戶後，您將失去：</p>
          <ul>
            <li>所有訂單記錄</li>
            <li>收藏清單</li>
            <li>會員等級和積分</li>
            <li>優惠券</li>
          </ul>
          <p>請輸入您的密碼以確認刪除：</p>
        </div>
      ),
      okText: '確認刪除',
      okType: 'danger',
      cancelText: '取消',
      onOk: async () => {
        const password = await new Promise((resolve) => {
          Modal.confirm({
            title: '輸入密碼',
            content: (
              <Input.Password
                placeholder="請輸入密碼"
                onChange={(e) => resolve(e.target.value)}
              />
            ),
            onOk: (password) => resolve(password)
          })
        })
        
        if (password) {
          try {
            await api.deleteAccount({ password })
            notification.success({
              message: '帳戶已刪除',
              description: '感謝您曾經使用我們的服務'
            })
            logout()
            window.location.href = '/'
          } catch (error) {
            notification.error({
              message: '刪除失敗',
              description: error.message
            })
          }
        }
      }
    })
  }
  
  return (
    <div className={styles.memberSettings}>
      <h2>帳戶設定</h2>
      
      <div className={styles.settingsSection}>
        <h3>密碼管理</h3>
        <PasswordChangeForm />
      </div>
      
      <div className={styles.settingsSection}>
        <h3>通知偏好</h3>
        <NotificationSettings />
      </div>
      
      <div className={styles.settingsSection}>
        <h3>隱私設定</h3>
        <div className={styles.dangerZone}>
          <h4>危險操作</h4>
          <p>一旦刪除帳戶，所有資料將無法復原</p>
          <Button 
            danger
            onClick={handleDeleteAccount}
          >
            刪除帳戶
          </Button>
        </div>
      </div>
    </div>
  )
}
```

## 樣式設計

### 1. 會員中心主要樣式
```scss
// styles/Member.module.scss
.memberPage {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  
  .memberContainer {
    display: grid;
    grid-template-columns: 280px 1fr;
    gap: 30px;
    
    @media (max-width: 768px) {
      grid-template-columns: 1fr;
      gap: 20px;
    }
  }
}

.memberSidebar {
  background: white;
  border-radius: 12px;
  padding: 24px;
  height: fit-content;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  
  .memberCard {
    text-align: center;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 20px;
    
    .memberAvatar {
      margin-bottom: 12px;
    }
    
    .memberName {
      margin: 0 0 8px 0;
      font-size: 18px;
      font-weight: 600;
      color: var(--text-color-primary);
    }
    
    .memberMeta {
      display: flex;
      flex-direction: column;
      gap: 4px;
      
      .joinDate {
        font-size: 12px;
        color: var(--text-color-tertiary);
      }
    }
  }
  
  .memberMenu {
    border: none;
    
    .ant-menu-item {
      border-radius: 8px;
      margin-bottom: 4px;
      
      &.ant-menu-item-selected {
        background: var(--color-primary-light);
        color: var(--color-primary);
      }
    }
    
    .menuLink {
      color: inherit;
      text-decoration: none;
    }
  }
}

.memberLevelProgress {
  margin-bottom: 20px;
  
  .levelHeader {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    
    .levelTitle {
      font-weight: 500;
    }
  }
  
  .progressSection {
    .progressInfo {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      margin-bottom: 8px;
    }
    
    .levelProgress {
      margin-bottom: 8px;
    }
    
    .upgradeRequirement {
      font-size: 12px;
      color: var(--text-color-secondary);
      text-align: center;
    }
  }
  
  .benefitsBtn {
    padding: 0;
    font-size: 12px;
  }
}

// 收藏清單網格樣式
.wishlistGrid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 20px;
  
  @media (max-width: 768px) {
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 15px;
  }
}

.wishlistCard {
  transition: all 0.3s ease;
  
  &:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  }
  
  &.selected {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
  }
  
  .cardCover {
    position: relative;
    
    .selectCheckbox {
      position: absolute;
      top: 8px;
      left: 8px;
      z-index: 1;
    }
    
    .productImage {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    
    .quickActions {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
      padding: 20px 16px 16px;
      opacity: 0;
      transition: opacity 0.3s ease;
      
      .addToCartBtn {
        width: 100%;
      }
    }
    
    &:hover .quickActions {
      opacity: 1;
    }
  }
}

// 響應式設計
@media (max-width: 768px) {
  .memberPage {
    padding: 10px;
  }
  
  .memberSidebar {
    padding: 16px;
  }
  
  .memberContent {
    padding: 16px;
  }
  
  .orderItem {
    .orderActions {
      flex-direction: column;
      
      .ant-btn {
        width: 100%;
        margin-bottom: 8px;
      }
    }
  }
}
```

這個會員系統設計文檔涵蓋了您提出的所有需求，包括會員等級顯示和進度條、訂單管理（狀態分類、搜尋、匯出）、收藏清單管理、頭像上傳、帳戶刪除流程等完整實現。